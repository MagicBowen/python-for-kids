# 数值变量与操作

## 引言

在上一章中，我们学习了如何处理**文字**（字符串）。文字帮我们表达信息、写名字、写句子。但如果要计算面积、统计数据、做数学题，我们还需要处理**数字**。

**数值**（number）就是计算机处理数学信息的方式。在日常生活中，数字无处不在：
- 你的年龄、身高、体重
- 考试分数、排名
- 商品价格、找零
- 游戏得分、等级

这一章，我们要深入了解：
- 什么是数值变量
- 整数和小数的区别
- 数值的基本运算
- 数学函数的使用
- 数值在实际生活中的应用

## 数值的类型

在Python中，数值主要有两种类型：

### 1. 整数（int）

**整数**就是没有小数部分的数字，可以是正数、负数或零。

```python
# 正整数
age = 10
height = 145

# 负整数
temperature = -5
balance = -100

# 零
zero = 0
```

**给家长的小贴士**：
- `int` 是 integer（整数）的缩写
- 整数可以用于计数、年龄、排名等场景
- 我们在第3章学过 `int()` 函数，它可以把字符串转换成整数

### 2. 小数（float）

**小数**也叫"浮点数"（float），是带小数点的数字。

```python
# 正小数
pi = 3.14
height = 1.45
price = 9.99

# 负小数
temperature = -3.5

# 科学计数法
big_number = 3.14e10  # 表示 3.14 × 10^10
small_number = 1.23e-5  # 表示 1.23 × 10^-5
```

**给家长的小贴士**：
- `float` 是"浮点数"（floating point number）的缩写
- "浮点"是因为小数点可以"浮动"到不同位置
- 小数用于测量、价格、精确计算等场景
- 在编程中，小数可能会有微小的误差（如 0.1 + 0.2 可能等于 0.30000000000000004），这是因为计算机表示小数的方式
- 暂时不需要深入理解浮点数的原理，孩子只要知道小数可能有微小误差即可

### 判断数值类型

我们可以用 `type()` 函数查看一个变量的类型：

```python
# 查看类型
i = 10
f = 3.14

print(type(i))  # 输出：<class 'int'>
print(type(f))  # 输出：<class 'float'>

# 判断类型
print(type(i) == int)   # 输出：True
print(type(f) == float)  # 输出：True
```

**给家长的小贴士**：
- `type()` 函数返回的结果是一个"类型对象"
- 如果孩子觉得 `type(i) == int` 太复杂，可以暂时不学
- 重点让孩子知道：整数是 `int`，小数是 `float`

## 数值的基本运算

### 1. 算术运算

Python支持所有的基本数学运算：

```python
a = 10
b = 3

# 加法
print(a + b)  # 输出：13

# 减法
print(a - b)  # 输出：7

# 乘法
print(a * b)  # 输出：30

# 除法（结果是小数）
print(a / b)  # 输出：3.3333333333333335

# 整除（只保留整数部分）
print(a // b)  # 输出：3

# 求余数（模运算）
print(a % b)  # 输出：1（因为 10 = 3×3 + 1）

# 幂运算（乘方）
print(a ** b)  # 输出：1000（10的3次方）
```

**给家长的小贴士**：
- `/` 是普通除法，结果总是小数（float）
- `//` 是整除，结果是整数（int），相当于"商"
- `%` 是求余数，可以理解为"除不尽剩下的部分"
- `**` 是幂运算，`2 ** 3` 就是 2³ = 8
- 如果孩子对整除和余数感到困惑，可以用分糖果来类比：10颗糖分给3个人，每人3颗，剩1颗

### 2. 运算的优先级

和数学一样，Python的运算也有优先级：

```python
# 先乘除，后加减
result = 2 + 3 * 4
print(result)  # 输出：14（不是20）

# 使用括号改变优先级
result = (2 + 3) * 4
print(result)  # 输出：20

# 幂运算优先级最高
result = 2 ** 3 * 4
print(result)  # 输出：32（先算2³=8，再算8×4）

# 同级运算从左到右
result = 10 - 3 - 2
print(result)  # 输出：5（先算10-3=7，再算7-2=5）
```

**优先级顺序**（从高到低）：
1. 括号 `()`
2. 幂运算 `**`
3. 乘除 `*` `/` `//` `%`
4. 加减 `+` `-`

**给家长的小贴士**：
- 建议孩子多使用括号，即使不是必须的，也可以让代码更清晰
- 如果不确定优先级，就用括号明确表示
- 可以和数学课学的运算优先级对比，帮助理解

## 实践 1：基础计算器

让我们用学到的知识做一个简单的计算器：

```python
# 基础计算器
print("=" * 30)
print("  小小计算器  ")
print("=" * 30)
print()

# 获取输入
num1 = input("请输入第一个数字：")
num2 = input("请输入第二个数字：")

# 转换成数值
num1 = float(num1)
num2 = float(num2)

# 计算
print()
print("计算结果：")
print("-" * 25)
print(f"{num1} + {num2} = {num1 + num2}")
print(f"{num1} - {num2} = {num1 - num2}")
print(f"{num1} × {num2} = {num1 * num2}")
print(f"{num1} ÷ {num2} = {num1 / num2}")
print(f"{num1} 整除 {num2} = {num1 // num2}")
print(f"{num1} 余 {num2} = {num1 % num2}")
print(f"{num1} 的 {num2} 次方 = {num1 ** num2}")
print("-" * 25)
```

**运行示例：**
```
==============================
  小小计算器
==============================
请输入第一个数字：10
请输入第二个数字：3

计算结果：
-------------------------
10.0 + 3.0 = 13.0
10.0 - 3.0 = 7.0
10.0 × 3.0 = 30.0
10.0 ÷ 3.0 = 3.3333333333333335
10.0 整除 3.0 = 3.0
10.0 余 3.0 = 1.0
10.0 的 3.0 次方 = 1000.0
-------------------------
```

**给家长的小贴士**：
- 这里我们用 `float()` 而不是 `int()`，因为用户可能输入小数
- f-string 让输出格式更清晰
- 可以让孩子尝试输入不同的数字，观察结果
- 可以讨论：为什么除法结果有很多小数？（因为 10/3 = 3.333... 无限循环）

## 练习 1：温度转换器

编写一个温度转换程序：
1. 询问用户摄氏温度
2. 转换成华氏温度（公式：F = C × 1.8 + 32）
3. 输出结果，保留一位小数

<details>
<summary>📝 点击查看提示</summary>

提示：
- 用 `float()` 获取小数温度
- 使用公式计算
- 用 f-string 格式化输出，如 `{fahrenheit:.1f}` 可以保留一位小数
</details>

<details>
<summary>📝 点击查看参考答案</summary>

```python
# 温度转换器
print("=" * 30)
print("  温度转换器  ")
print("=" * 30)
print()

# 获取摄氏温度
celsius = input("请输入摄氏温度：")
celsius = float(celsius)

# 转换成华氏温度
fahrenheit = celsius * 1.8 + 32

# 输出结果
print()
print(f"{celsius}°C = {fahrenheit:.1f}°F")
```

**运行示例：**
```
==============================
  温度转换器
==============================

请输入摄氏温度：25

25.0°C = 77.0°F
```

**给家长的小贴士**：
- `.1f` 表示保留1位小数，`.2f` 表示保留2位小数
- 可以和孩子讨论：为什么用小数而不是整数？（因为温度可能是小数）
- 可以扩展：添加华氏转摄氏的功能（C = (F - 32) / 1.8）
</details>

## 数学函数

Python内置了一些数学函数，可以帮我们完成复杂的计算。

### 1. 绝对值、最大值、最小值

```python
# 绝对值
print(abs(-5))    # 输出：5
print(abs(3.14))  # 输出：3.14

# 最大值
print(max(1, 5, 3))      # 输出：5
print(max(10, 20, 30))   # 输出：30

# 最小值
print(min(1, 5, 3))      # 输出：1
print(min(10, 20, 30))   # 输出：10

# 也可以用于列表（后面会学）
numbers = [3, 1, 4, 1, 5]
print(max(numbers))  # 输出：5
print(min(numbers))  # 输出：1
```

**给家长的小贴士**：
- `abs` 是 absolute value（绝对值）的缩写
- `max` 和 `min` 可以接受多个数字或一个列表
- 绝对值可以用"距离原点的距离"来解释：-5 到 0 的距离是 5

### 2. 四舍五入

```python
# 四舍五入
print(round(3.14))    # 输出：3（默认保留整数）
print(round(3.5))     # 输出：4（.5会进位）
print(round(3.14159, 2))  # 输出：3.14（保留2位小数）
print(round(3.14159, 3))  # 输出：3.142（保留3位小数）

# 负数也可以
print(round(-3.5))    # 输出：-4
```

**给家长的小贴士**：
- `round()` 的第二个参数是保留的小数位数
- "四舍五入"在Python中其实是"银行家舍入"（.5会舍入到最近的偶数）
- 例如：2.5 → 2，3.5 → 4（而不是2.5→3，3.5→4）
- 这个细节孩子不需要深究，知道是四舍五入即可

### 3. 幂运算和对数

```python
# 幂运算（也可以用 **）
print(pow(2, 3))  # 输出：8（2的3次方）
print(pow(5, 2))  # 输出：25（5的2次方）

# 平方根
print(4 ** 0.5)   # 输出：2.0（4的平方根）
print(9 ** 0.5)   # 输出：3.0（9的平方根）
```

**给家长的小贴士**：
- `pow(x, y)` 等价于 `x ** y`
- 平方根可以用 `x ** 0.5` 计算
- 对数需要导入 `math` 模块，这是进阶内容，第13章会学到

## 实践 2：成绩统计器

让我们用学到的函数做一个成绩统计器：

```python
# 成绩统计器
print("=" * 30)
print("  成绩统计器  ")
print("=" * 30)
print()

# 获取成绩
chinese = input("请输入语文成绩：")
math = input("请输入数学成绩：")
english = input("请输入英语成绩：")

# 转换成数值
chinese = float(chinese)
math = float(math)
english = float(english)

# 计算
total = chinese + math + english
average = total / 3
highest = max(chinese, math, english)
lowest = min(chinese, math, english)

# 输出
print()
print("统计结果：")
print("-" * 25)
print(f"总分：{total:.1f}")
print(f"平均分：{average:.2f}")
print(f"最高分：{highest:.1f}")
print(f"最低分：{lowest:.1f}")
print("-" * 25)
```

**运行示例：**
```
==============================
  成绩统计器
==============================

请输入语文成绩：85
请输入数学成绩：92
请输入英语成绩：88

统计结果：
-------------------------
总分：265.0
平均分：88.33
最高分：92.0
最低分：85.0
-------------------------
```

## 练习 2：购物清单

编写一个购物清单程序：
1. 询问3件商品的价格
2. 计算总价
3. 如果总价超过100元，打9折
4. 输出原价、折扣、最终价格

<details>
<summary>📝 点击查看参考答案</summary>

```python
# 购物清单程序
print("=" * 30)
print("  购物清单  ")
print("=" * 30)
print()

# 获取价格
price1 = input("请输入第1件商品价格：")
price2 = input("请输入第2件商品价格：")
price3 = input("请输入第3件商品价格：")

# 转换成数值
price1 = float(price1)
price2 = float(price2)
price3 = float(price3)

# 计算总价
total = price1 + price2 + price3

# 判断折扣
discount = 0
final_price = total

if total > 100:
    discount = total * 0.1  # 9折就是减去10%
    final_price = total - discount

# 输出
print()
print("账单：")
print("-" * 25)
print(f"商品1：¥{price1:.2f}")
print(f"商品2：¥{price2:.2f}")
print(f"商品3：¥{price3:.2f}")
print("-" * 25)
print(f"原价：¥{total:.2f}")
print(f"折扣：-¥{discount:.2f}")
print(f"最终：¥{final_price:.2f}")
print("-" * 25)
```

**运行示例：**
```
==============================
  购物清单
==============================

请输入第1件商品价格：35
请输入第2件商品价格：45
请输入第3件商品价格：30

账单：
-------------------------
商品1：¥35.00
商品2：¥45.00
商品3：¥30.00
-------------------------
原价：¥110.00
折扣：-¥11.00
最终：¥99.00
-------------------------
```

**给家长的小贴士**：
- 这个练习用到了条件语句（第5章内容）
- 如果孩子还没学，可以先简化：不打折，只计算总价
- 可以扩展：添加更多商品、多级折扣等
</details>

## 数值的格式化输出

在输出数值时，我们可以控制它的显示格式。

### 1. 控制小数位数

```python
pi = 3.1415926

# 保留2位小数
print(f"{pi:.2f}")  # 输出：3.14

# 保留4位小数
print(f"{pi:.4f}")  # 输出：3.1416

# 不保留小数
print(f"{pi:.0f}")  # 输出：3

# 自动保留（不指定）
print(f"{pi}")  # 输出：3.1415926
```

### 2. 对齐和宽度

```python
number = 42

# 右对齐，宽度10
print(f"[{number:>10}]")  # 输出：[        42]

# 左对齐，宽度10
print(f"[{number:<10}]")  # 输出：[42        ]

# 居中，宽度10
print(f"[{number:^10}]")  # 输出：[    42    ]

# 小数也可以对齐
pi = 3.14
print(f"[{pi:^10.2f}]")  # 输出：[   3.14   ]
```

### 3. 添加千位分隔符

```python
big_number = 1234567890

# 添加千位分隔符
print(f"{big_number:,}")  # 输出：1,234,567,890

# 小数也可以
price = 1234.56
print(f"¥{price:,.2f}")  # 输出：¥1,234.56
```

**给家长的小贴士**：
- 格式化字符串的语法是 `f"{变量:格式}"`
- `:.2f` 表示保留2位小数
- `:>10` 表示右对齐，宽度10
- `:,` 表示添加千位分隔符
- 这些格式可以组合使用，如 `:>10,.2f`
- 暂时不需要孩子记住所有格式，需要时再查阅

## 实践 3：梯形计算器

还记得本章开头提到的练习吗？让我们做一个完整的梯形计算器：

```python
# 梯形计算器
print("=" * 35)
print("  梯形计算器  ")
print("=" * 35)
print()
print("梯形有四条边：上底、下底、两条腰")
print()

# 获取输入
top = input("请输入上底的长度：")
bottom = input("请输入下底的长度：")
left = input("请输入左侧腰的长度：")
right = input("请输入右侧腰的长度：")
height = input("请输入梯形的高度：")

# 转换成数值
top = float(top)
bottom = float(bottom)
left = float(left)
right = float(right)
height = float(height)

# 计算
area = (top + bottom) * height / 2
perimeter = top + bottom + left + right

# 输出
print()
print("计算结果：")
print("-" * 30)
print(f"上底：{top:.2f}")
print(f"下底：{bottom:.2f}")
print(f"左腰：{left:.2f}")
print(f"右腰：{right:.2f}")
print(f"高度：{height:.2f}")
print("-" * 30)
print(f"面积：{area:.2f}")
print(f"周长：{perimeter:.2f}")
print("-" * 30)
```

**运行示例：**
```
===================================
  梯形计算器
===================================

梯形有四条边：上底、下底、两条腰

请输入上底的长度：5
请输入下底的长度：8
请输入左侧腰的长度：4
请输入右侧腰的长度：4
请输入梯形的高度：3

计算结果：
------------------------------
上底：5.00
下底：8.00
左腰：4.00
右腰：4.00
高度：3.00
------------------------------
面积：19.50
周长：21.00
------------------------------
```

**给家长的小贴士**：
- 梯形面积公式：面积 = (上底 + 下底) × 高 ÷ 2
- 梯形周长公式：周长 = 上底 + 下底 + 左腰 + 右腰
- 可以用梯形图片或实物帮助孩子理解
- 可以扩展：检查输入是否合理（如上底+下底不能为负数等）

## 数值和字符串的混合操作

在实际编程中，我们经常需要把数值和文字结合起来。

### 1. 类型转换回顾

```python
# 数值转字符串
age = 10
message = "我今年" + str(age) + "岁"
print(message)  # 输出：我今年10岁

# 字符串转数值
price = "9.99"
price = float(price)
total = price * 2
print(total)  # 输出：19.98
```

### 2. f-string 最方便

```python
# f-string 自动转换
name = "小明"
age = 10
height = 1.45

# f-string 自动处理类型
print(f"我叫{name}，今年{age}岁，身高{height}米")
# 输出：我叫小明，今年10岁，身高1.45米

# 也可以进行计算
side = 5
area = side * side
print(f"边长为{side}的正方形，面积是{area}")
# 输出：边长为5的正方形，面积是25
```

## 常见错误和调试

### 错误 1：忘记类型转换

```python
# 错误示例
a = input("请输入第一个数字：")
b = input("请输入第二个数字：")
print(a + b)  # 错误！这是字符串拼接，不是加法

# 正确做法
a = input("请输入第一个数字：")
b = input("请输入第二个数字：")
a = float(a)  # 转换成数值
b = float(b)
print(a + b)  # 正确！这是数值加法
```

### 错误 2：整数除法

```python
# 错误示例
a = 10
b = 3
print(a / b)  # 输出：3.3333333333333335

# 如果想要整数结果
print(a // b)  # 输出：3
print(int(a / b))  # 输出：3
```

### 错误 3：小数精度问题

```python
# 小数可能有微小误差
print(0.1 + 0.2)  # 输出：0.30000000000000004

# 解决方法：四舍五入
result = 0.1 + 0.2
print(round(result, 2))  # 输出：0.3
```

**给家长的小贴士**：
- 这些错误是初学者最容易犯的
- 建议让孩子亲自运行这些错误代码，理解为什么出错
- 调试（debug）是编程的重要部分，不要怕犯错
- 可以鼓励孩子：每个错误都是学习的机会

## 章节小结

恭喜你完成了这一章！让我们回顾一下学到的内容：

### 核心概念
1. **整数（int）**：没有小数部分的数字
2. **小数（float）**：带小数点的数字
3. **算术运算**：加减乘除、整除、求余、幂运算
4. **运算优先级**：括号 > 幂运算 > 乘除 > 加减

### 常用函数
- `abs()`：绝对值
- `max()` / `min()`：最大值/最小值
- `round()`：四舍五入
- `pow()`：幂运算

### 格式化输出
- `f"{num:.2f}"`：保留2位小数
- `f"{num:,}"`：添加千位分隔符
- `f"{num:>10}"`：右对齐，宽度10

### 重要提示
- `/` 是普通除法，`//` 是整除
- `%` 是求余数
- `input()` 得到的是字符串，需要转换成数值才能计算
- 小数可能有微小精度误差

## 给家长的小贴士：教学建议

### 教学重点
1. **整数和小数的区别**：什么时候用整数，什么时候用小数
2. **类型转换**：这是最容易出错的地方，要强调
3. **整除和求余**：对孩子来说比较抽象，需要用实物类比
4. **运算优先级**：可以用数学课的知识对比

### 常见问题及解答
1. **问：什么时候用整数，什么时候用小数？**
   - 答：计数、年龄、排名用整数；测量、价格、精确计算用小数。

2. **问：为什么 10 / 3 结果不是整数？**
   - 答：因为 `/` 是普通除法，结果总是小数。如果想要整数，用 `//` 整除。

3. **问：求余数有什么用？**
   - 答：可以用来判断能不能整除、判断奇数偶数、分东西等。

4. **问：为什么小数计算会有误差？**
   - 答：这是计算机表示小数的方式造成的。如果需要精确计算，可以用 `decimal` 模块（进阶内容）。

### 练习建议
- 让孩子用数值计算制作各种"计算器"：温度转换、货币兑换、成绩统计
- 多用生活中的例子：购物、烹饪（食谱换算）、运动（步数、距离）
- 鼓励孩子尝试不同的运算，观察结果

## 挑战练习

1. **复利计算器**：输入本金、年利率、年数，计算复利（公式：最终金额 = 本金 × (1 + 利率)^年数）

2. **BMI计算器**：输入身高和体重，计算BMI（公式：BMI = 体重 ÷ 身高²），并判断是否正常

3. **找零计算器**：输入商品价格和支付金额，计算应该找多少零钱（尽量用大面额纸币）

4. **速度计算器**：输入距离和时间，计算速度（公式：速度 = 距离 ÷ 时间）

<details>
<summary>🔗 下一章：Bool变量与操作</summary>

在下一章中，我们将学习：
- 什么是布尔值（True和False）
- 比较运算符
- 逻辑运算符（与、或、非）
- 布尔值在判断中的应用

数值帮我们处理计算，布尔值帮我们做判断。两者结合起来，我们就可以编写更智能的程序了！
</details>
